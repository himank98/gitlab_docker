(this.webpackJsonp=this.webpackJsonp||[]).push([[52],{"3A1N":function(e,t,i){"use strict";var n=i("3a3M"),a=i.n(n),s=i("FkSe"),o=i("LLbv"),r=i("/lV4"),l=i("XRO8"),p=i("2ibD"),c=i("s5BM"),u=i("len0"),d=i("PvM2"),h=i("k4Ha"),f={components:{Icon:u.a,JobItem:d.a,GlLoadingIcon:s.a},directives:{GlTooltip:o.a},props:{stage:{type:Object,required:!0},updateDropdown:{type:Boolean,required:!1,default:!1},type:{type:String,required:!1,default:""}},data:function(){return{isLoading:!1,dropdownContent:""}},computed:{dropdownClass:function(){return this.dropdownContent.length>0?"js-builds-dropdown-container":"js-builds-dropdown-loading"},triggerButtonClass:function(){return"ci-status-icon-".concat(this.stage.status.group)},borderlessIcon:function(){return"".concat(this.stage.status.icon,"_borderless")}},watch:{updateDropdown:function(){this.updateDropdown&&this.isDropdownOpen()&&!this.isLoading&&this.fetchJobs()}},updated:function(){this.dropdownContent.length>0&&this.stopDropdownClickPropagation()},methods:{onClickStage:function(){this.isDropdownOpen()||(c.a.$emit("clickedDropdown"),this.isLoading=!0,this.fetchJobs())},fetchJobs:function(){var e=this;p.a.get(this.stage.dropdown_path).then((function(t){var i=t.data;e.dropdownContent=i.latest_statuses,e.isLoading=!1})).catch((function(){e.closeDropdown(),e.isLoading=!1,Object(l.a)(Object(r.a)("Something went wrong on our end."))}))},stopDropdownClickPropagation:function(){a()(".js-builds-dropdown-list button, .js-builds-dropdown-list a.mini-pipeline-graph-dropdown-item",this.$el).on("click",(function(e){e.stopPropagation()}))},closeDropdown:function(){this.isDropdownOpen()&&a()(this.$refs.dropdown).dropdown("toggle")},isDropdownOpen:function(){return this.$el.classList.contains("show")},pipelineActionRequestComplete:function(){this.type===h.i?c.a.$emit("refreshPipelinesTable"):a()(this.$refs.dropdown).dropdown("toggle")}}},m=i("tBpV"),g=Object(m.a)(f,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"dropdown"},[i("button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.hover",modifiers:{hover:!0}}],ref:"dropdown",staticClass:"mini-pipeline-graph-dropdown-toggle js-builds-dropdown-button",class:e.triggerButtonClass,attrs:{id:"stageDropdown",title:e.stage.title,"data-toggle":"dropdown","data-display":"static",type:"button","aria-haspopup":"true","aria-expanded":"false"},on:{click:e.onClickStage}},[i("span",{staticClass:"no-pointer-events",attrs:{"aria-label":e.stage.title,"aria-hidden":"true"}},[i("icon",{attrs:{name:e.borderlessIcon}})],1)]),e._v(" "),i("div",{staticClass:"dropdown-menu mini-pipeline-graph-dropdown-menu js-builds-dropdown-container",attrs:{"aria-labelledby":"stageDropdown"}},[e.isLoading?i("gl-loading-icon"):i("ul",{staticClass:"js-builds-dropdown-list scrollable-menu"},e._l(e.dropdownContent,(function(t){return i("li",{key:t.id},[i("job-item",{attrs:{"dropdown-length":e.dropdownContent.length,job:t,"css-class-job-name":"mini-pipeline-graph-dropdown-item"},on:{pipelineActionRequestComplete:e.pipelineActionRequestComplete}})],1)})),0)],1)])}),[],!1,null,null,null);t.a=g.exports},"69Ig":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));i("BD5p");var n=i("NmEs");function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state={},this.state.pipelines=[],this.state.count={},this.state.pageInfo={},this.state.isRunningMergeRequestPipeline=!1}var t,i,s;return t=e,(i=[{key:"storePipelines",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.state.pipelines=e}},{key:"storeCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.state.count=e}},{key:"storePagination",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object.keys(t).length){var i=Object(n.F)(t);e=Object(n.I)(i)}else e=t;this.state.pageInfo=e}},{key:"toggleIsRunningPipeline",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state.isRunningMergeRequestPipeline=e}}])&&a(t.prototype,i),s&&a(t,s),e}()},"71Sp":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));i("FMw2"),i("QifN");var n=i("osXd"),a=i.n(n),s=i("k4Ha"),o=function(e){return a()(e,(function(e,t){return s.k.includes(t)&&e}))}},"D/do":function(e,t,i){"use strict";var n={name:"PipelinesEmptyState",components:{GlDeprecatedButton:i("GTGS").a},props:{helpPagePath:{type:String,required:!0},emptyStateSvgPath:{type:String,required:!0},canSetCi:{type:Boolean,required:!0}}},a=i("tBpV"),s=Object(a.a)(n,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row empty-state js-empty-state"},[i("div",{staticClass:"col-12"},[i("div",{staticClass:"svg-content svg-250"},[i("img",{attrs:{src:e.emptyStateSvgPath}})])]),e._v(" "),i("div",{staticClass:"col-12"},[i("div",{staticClass:"text-content"},[e.canSetCi?[i("h4",{staticClass:"text-center"},[e._v(e._s(e.s__("Pipelines|Build with confidence")))]),e._v(" "),i("p",[e._v("\n          "+e._s(e.s__("Pipelines|Continuous Integration can help\n              catch bugs by running your tests automatically,\n              while Continuous Deployment can help you deliver\n              code to your product environment."))+"\n        ")]),e._v(" "),i("div",{staticClass:"text-center"},[i("gl-deprecated-button",{staticClass:"js-get-started-pipelines",attrs:{href:e.helpPagePath,variant:"primary"}},[e._v("\n            "+e._s(e.s__("Pipelines|Get started with Pipelines"))+"\n          ")])],1)]:i("p",{staticClass:"text-center"},[e._v("\n        "+e._s(e.s__("Pipelines|This project is not currently set up to run pipelines."))+"\n      ")])],2)])])}),[],!1,null,null,null);t.a=s.exports},VuQQ:function(e,t,i){"use strict";i("+xU6"),i("L1PU");var n=i("LLbv"),a=i("bOix"),s={directives:{GlTooltip:n.a},props:{endDateString:{type:String,required:!0,validator:function(e){return!Number.isNaN(new Date(e).getTime())}}},data:function(){return{remainingTime:Object(a.e)(0),countdownUpdateIntervalId:null}},mounted:function(){var e=this,t=function(){var t=Object(a.b)(e.endDateString);e.remainingTime=Object(a.e)(t)};t(),this.countdownUpdateIntervalId=window.setInterval(t,1e3)},beforeDestroy:function(){window.clearInterval(this.countdownUpdateIntervalId)}},o=i("tBpV"),r=Object(o.a)(s,(function(){var e=this.$createElement;return(this._self._c||e)("time",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],attrs:{datetime:this.endDateString,title:this.endDateString}},[this._v(" "+this._s(this.remainingTime)+" ")])}),[],!1,null,null,null);t.a=r.exports},WYZc:function(e,t,i){"use strict";i("va8A"),i("9U97"),i("kO4A"),i("+kFb"),i("gyUR"),i("Z5ek"),i("+xU6"),i("zCcL"),i("zpLX"),i("BD5p"),i("MRnW"),i("GzNv"),i("Id6h");var n=i("NmEs"),a=i("71Sp");function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}t.a={methods:{onChangeTab:function(e){var t={scope:e,page:"1"};t=this.onChangeWithFilter(t),this.updateContent(t)},onChangePage:function(e){var t={page:Number(e).toString()};this.scope&&(t.scope=this.scope),t=this.onChangeWithFilter(t),this.updateContent(t)},onChangeWithFilter:function(e){return o(o({},e),Object(a.a)(this.requestData))},updateInternalState:function(e){var t=this;this.poll.stop();var i=Object.keys(e).map((function(i){var n=e[i];return t[i]=n,"".concat(i,"=").concat(encodeURIComponent(n))})).join("&");this.requestData=e,Object(n.t)(Object(n.f)("?".concat(i))),this.isLoading=!0}}}},fY2I:function(e,t,i){"use strict";var n=i("3a3M"),a=i.n(n);t.a={bind:function(e,t){a()(e).popover(t.value)},unbind:function(e){a()(e).popover("dispose")}}},goKL:function(e,t,i){"use strict";i("MRnW"),i("jaBk"),i("KcQl");var n=i("99pJ"),a=i.n(n),s=i("FkSe"),o=i("/lV4"),r=i("XRO8"),l=i("hqF9"),p=i("D/do"),c={name:"PipelinesSvgState",props:{svgPath:{type:String,required:!0},message:{type:String,required:!0}}},u=i("tBpV"),d=Object(u.a)(c,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"row empty-state"},[t("div",{staticClass:"col-12"},[t("div",{staticClass:"svg-content"},[t("img",{attrs:{src:this.svgPath}})])]),this._v(" "),t("div",{staticClass:"col-12 text-center"},[t("div",{staticClass:"text-content"},[t("h4",[this._v(this._s(this.message))])])])])}),[],!1,null,null,null).exports,h=i("LLbv"),f=(i("va8A"),i("z4I3"),i("dj/k"),i("9U97"),i("kO4A"),i("+kFb"),i("OZM5"),i("x/6R"),i("yaFd"),i("4ql4"),i("8Qi2"),i("+xU6"),i("zCcL"),i("zpLX"),i("BD5p"),i("jslJ"),i("GzNv"),i("tbvx"),i("Id6h"),i("orcL"),i("s5BM")),m=i("GTGS"),g=i("2ibD"),v=i("VuQQ"),b=i("len0"),_={directives:{GlTooltip:h.a},components:{Icon:b.a,GlCountdown:v.a,GlDeprecatedButton:m.a,GlLoadingIcon:s.a},props:{actions:{type:Array,required:!0}},data:function(){return{isLoading:!1}},methods:{onClickAction:function(e){var t=this;if(e.scheduled_at){var i=Object(o.e)(Object(o.d)("DelayedJobs|Are you sure you want to run %{jobName} immediately? Otherwise this job will run automatically after it's timer finishes."),{jobName:e.name});if(!window.confirm(i))return}this.isLoading=!0,g.a.post("".concat(e.path,".json")).then((function(){t.isLoading=!1,f.a.$emit("updateTable")})).catch((function(){t.isLoading=!1,Object(r.a)(Object(o.a)("An error occurred while making the request."))}))},isActionDisabled:function(e){return void 0!==e.playable&&!e.playable}}},w=Object(u.a)(_,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"btn-group"},[i("button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"dropdown-new btn btn-default js-pipeline-dropdown-manual-actions",attrs:{type:"button",disabled:e.isLoading,title:e.__("Manual job"),"data-toggle":"dropdown","aria-label":e.__("Manual job")}},[i("icon",{staticClass:"icon-play",attrs:{name:"play"}}),e._v(" "),i("i",{staticClass:"fa fa-caret-down",attrs:{"aria-hidden":"true"}}),e._v(" "),e.isLoading?i("gl-loading-icon"):e._e()],1),e._v(" "),i("ul",{staticClass:"dropdown-menu dropdown-menu-right"},e._l(e.actions,(function(t){return i("li",{key:t.path},[i("gl-deprecated-button",{staticClass:"js-pipeline-action-link no-btn btn d-flex align-items-center justify-content-between flex-wrap",class:{disabled:e.isActionDisabled(t)},attrs:{disabled:e.isActionDisabled(t)},on:{click:function(i){return e.onClickAction(t)}}},[e._v("\n        "+e._s(t.name)+"\n        "),t.scheduled_at?i("span",[i("icon",{attrs:{name:"clock"}}),e._v(" "),i("gl-countdown",{attrs:{"end-date-string":t.scheduled_at}})],1):e._e()])],1)})),0)])}),[],!1,null,null,null).exports,y=i("MV2A"),C={directives:{GlTooltip:h.a},components:{Icon:b.a,GlLink:y.a},props:{artifacts:{type:Array,required:!0}}},j=Object(u.a)(C,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"btn-group",attrs:{role:"group"}},[i("button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"dropdown-toggle build-artifacts btn btn-default js-pipeline-dropdown-download",attrs:{type:"button",title:e.__("Artifacts"),"data-toggle":"dropdown","aria-label":e.__("Artifacts")}},[i("icon",{attrs:{name:"download"}}),e._v(" "),i("i",{staticClass:"fa fa-caret-down",attrs:{"aria-hidden":"true"}})],1),e._v(" "),i("ul",{staticClass:"dropdown-menu dropdown-menu-right"},e._l(e.artifacts,(function(t,n){return i("li",{key:n},[i("gl-link",{attrs:{href:t.path,rel:"nofollow",download:""}},[e._v("Download "+e._s(t.name)+" artifact")])],1)})),0)])}),[],!1,null,null,null).exports,P=i("2Swe"),O=i("3A1N"),k=i("G3fq"),D=i.n(k),S=i("fY2I"),q=Object(o.e)(D()(Object(o.a)("This pipeline makes use of a predefined CI/CD configuration enabled by %{strongStart}Auto DevOps.%{strongEnd}")),{strongStart:"<b>",strongEnd:"</b>"},!1),T={components:{GlLink:y.a},directives:{GlTooltip:h.a,popover:S.a},props:{pipeline:{type:Object,required:!0},autoDevopsHelpPath:{type:String,required:!0}},computed:{user:function(){return this.pipeline.user},popoverOptions:function(){return{html:!0,trigger:"focus",placement:"top",title:'<div class="autodevops-title">\n            '.concat(q,"\n          </div>"),content:'<a\n            class="autodevops-link"\n            href="'.concat(this.autoDevopsHelpPath,'"\n            target="_blank"\n            rel="noopener noreferrer nofollow">\n            ').concat(D()(Object(o.a)("Learn more about Auto DevOps")),"\n          </a>")}}}},A=Object(u.a)(T,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"table-section section-10 d-none d-sm-none d-md-block pipeline-tags"},[i("gl-link",{staticClass:"js-pipeline-url-link js-onboarding-pipeline-item",attrs:{href:e.pipeline.path,"data-qa-selector":"pipeline_url_link"}},[i("span",{staticClass:"pipeline-id"},[e._v("#"+e._s(e.pipeline.id))])]),e._v(" "),i("div",{staticClass:"label-container"},[e.pipeline.flags.latest?i("span",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"js-pipeline-url-latest badge badge-success",attrs:{title:e.__("Latest pipeline for the most recent commit on this branch")}},[e._v("\n      "+e._s(e.__("latest"))+"\n    ")]):e._e(),e._v(" "),e.pipeline.flags.yaml_errors?i("span",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"js-pipeline-url-yaml badge badge-danger",attrs:{title:e.pipeline.yaml_errors}},[e._v("\n      "+e._s(e.__("yaml invalid"))+"\n    ")]):e._e(),e._v(" "),e.pipeline.flags.failure_reason?i("span",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"js-pipeline-url-failure badge badge-danger",attrs:{title:e.pipeline.failure_reason}},[e._v("\n      "+e._s(e.__("error"))+"\n    ")]):e._e(),e._v(" "),e.pipeline.flags.auto_devops?i("gl-link",{directives:[{name:"popover",rawName:"v-popover",value:e.popoverOptions,expression:"popoverOptions"}],staticClass:"js-pipeline-url-autodevops badge badge-info autodevops-badge",attrs:{tabindex:"0",role:"button"}},[e._v(e._s(e.__("Auto DevOps")))]):e._e(),e._v(" "),e.pipeline.flags.stuck?i("span",{staticClass:"js-pipeline-url-stuck badge badge-warning"},[e._v("\n      "+e._s(e.__("stuck"))+"\n    ")]):e._e(),e._v(" "),e.pipeline.flags.detached_merge_request_pipeline?i("span",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"js-pipeline-url-detached badge badge-info",attrs:{title:e.__("Pipelines for merge requests are configured. A detached pipeline runs in the context of the merge request, and not against the merged result. Learn more in the documentation for Pipelines for Merged Results.")}},[e._v("\n      "+e._s(e.__("detached"))+"\n    ")]):e._e()],1)],1)}),[],!1,null,null,null).exports,R={components:{UserAvatarLink:i("ZHzM").a},props:{pipeline:{type:Object,required:!0}},computed:{user:function(){return this.pipeline.user}}},I=Object(u.a)(R,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"table-section section-10 d-none d-sm-none d-md-block pipeline-triggerer"},[this.user?t("user-avatar-link",{staticClass:"prepend-left-default js-pipeline-url-user",attrs:{"link-href":this.user.path,"img-src":this.user.avatar_url,"img-size":26,"tooltip-text":this.user.name}}):t("span",{staticClass:"prepend-left-default js-pipeline-url-api api"},[this._v("\n    "+this._s(this.s__("Pipelines|API"))+"\n  ")])],1)}),[],!1,null,null,null).exports,M=(i("bOix"),i("Dfb/")),L=i("5QKO"),x={directives:{tooltip:M.a},mixins:[L.a],props:{finishedTime:{type:String,required:!0},duration:{type:Number,required:!0}},data:function(){return{iconTimerSvg:'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40"><g fill="#8F8F8F" fill-rule="evenodd"><path d="M29.513 10.134A15.922 15.922 0 0 0 23 7.28V6h2.993C26.55 6 27 5.552 27 5V2a1 1 0 0 0-1.007-1H14.007C13.45 1 13 1.448 13 2v3a1 1 0 0 0 1.007 1H17v1.28C9.597 8.686 4 15.19 4 23c0 8.837 7.163 16 16 16s16-7.163 16-16c0-3.461-1.099-6.665-2.967-9.283l1.327-1.58a2.498 2.498 0 0 0-.303-3.53 2.499 2.499 0 0 0-3.528.315l-1.016 1.212zM20 34c6.075 0 11-4.925 11-11s-4.925-11-11-11S9 16.925 9 23s4.925 11 11 11z"/><path d="M19 21h-4.002c-.552 0-.998.452-.998 1.01v1.98c0 .567.447 1.01.998 1.01h7.004c.274 0 .521-.111.701-.291a.979.979 0 0 0 .297-.704v-8.01c0-.54-.452-.995-1.01-.995h-1.98a.997.997 0 0 0-1.01.995V21z"/></g></svg>\n'}},computed:{hasDuration:function(){return this.duration>0},hasFinishedTime:function(){return""!==this.finishedTime},durationFormatted:function(){var e=new Date(1e3*this.duration),t=e.getUTCHours(),i=e.getUTCMinutes(),n=e.getSeconds();return t<10&&(t="0".concat(t)),i<10&&(i="0".concat(i)),n<10&&(n="0".concat(n)),"".concat(t,":").concat(i,":").concat(n)}}},$=Object(u.a)(x,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"table-section section-15 pipelines-time-ago"},[i("div",{staticClass:"table-mobile-header",attrs:{role:"rowheader"}},[e._v(e._s(e.s__("Pipeline|Duration")))]),e._v(" "),i("div",{staticClass:"table-mobile-content"},[e.hasDuration?i("p",{staticClass:"duration"},[i("span",{domProps:{innerHTML:e._s(e.iconTimerSvg)}}),e._v(" "+e._s(e.durationFormatted)+"\n    ")]):e._e(),e._v(" "),e.hasFinishedTime?i("p",{staticClass:"finished-at d-none d-sm-none d-md-block"},[i("i",{staticClass:"fa fa-calendar",attrs:{"aria-hidden":"true"}}),e._v(" "),i("time",{directives:[{name:"tooltip",rawName:"v-tooltip"}],attrs:{title:e.tooltipTitle(e.finishedTime),"data-placement":"top","data-container":"body"}},[e._v("\n        "+e._s(e.timeFormatted(e.finishedTime))+"\n      ")])]):e._e()])])}),[],!1,null,null,null).exports,E=i("AN20"),G=i("3c3Z"),N=i("k4Ha");function B(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function F(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?B(Object(i),!0).forEach((function(t){U(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):B(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function U(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function z(e){return function(e){if(Array.isArray(e))return V(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return V(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return V(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var H={components:{PipelinesActionsComponent:w,PipelinesArtifactsComponent:j,CommitComponent:E.a,PipelineStage:O.a,PipelineUrl:A,PipelineTriggerer:I,CiBadge:P.a,PipelinesTimeago:$,LoadingButton:G.a,Icon:b.a},props:{pipeline:{type:Object,required:!0},updateGraphDropdown:{type:Boolean,required:!1,default:!1},autoDevopsHelpPath:{type:String,required:!0},viewType:{type:String,required:!0},cancelingPipeline:{type:Number,required:!1,default:null}},pipelinesTable:N.i,data:function(){return{isRetrying:!1}},computed:{actions:function(){if(!this.pipeline||!this.pipeline.details)return[];var e=this.pipeline.details;return[].concat(z(e.manual_actions||[]),z(e.scheduled_actions||[]))},commitAuthor:function(){var e;return this.pipeline&&this.pipeline.commit?(this.pipeline.commit.author?this.pipeline.commit.author.avatar_url?e=this.pipeline.commit.author:this.pipeline.commit.author_gravatar_url&&(e=F(F({},this.pipeline.commit.author),{},{avatar_url:this.pipeline.commit.author_gravatar_url})):e={avatar_url:this.pipeline.commit.author_gravatar_url,path:"mailto:".concat(this.pipeline.commit.author_email),username:this.pipeline.commit.author_name},e):null},commitTag:function(){if(this.pipeline.ref&&this.pipeline.ref.tag)return this.pipeline.ref.tag},commitRef:function(){var e=this;if(this.pipeline.ref)return Object.keys(this.pipeline.ref).reduce((function(t,i){return"path"===i?t.ref_url=e.pipeline.ref[i]:t[i]=e.pipeline.ref[i],t}),{})},commitUrl:function(){if(this.pipeline.commit&&this.pipeline.commit.commit_path)return this.pipeline.commit.commit_path},commitShortSha:function(){if(this.pipeline.commit&&this.pipeline.commit.short_id)return this.pipeline.commit.short_id},commitTitle:function(){if(this.pipeline.commit&&this.pipeline.commit.title)return this.pipeline.commit.title},pipelineDuration:function(){return this.pipeline.details&&this.pipeline.details.duration?this.pipeline.details.duration:0},pipelineFinishedAt:function(){return this.pipeline.details&&this.pipeline.details.finished_at?this.pipeline.details.finished_at:""},pipelineStatus:function(){return this.pipeline.details&&this.pipeline.details.status?this.pipeline.details.status:{}},displayPipelineActions:function(){return this.pipeline.flags.retryable||this.pipeline.flags.cancelable||this.pipeline.details.manual_actions.length||this.pipeline.details.artifacts.length},isChildView:function(){return"child"===this.viewType},isCancelling:function(){return this.cancelingPipeline===this.pipeline.id}},watch:{pipeline:function(){this.isRetrying=!1}},methods:{handleCancelClick:function(){f.a.$emit("openConfirmationModal",{pipeline:this.pipeline,endpoint:this.pipeline.cancel_path})},handleRetryClick:function(){this.isRetrying=!0,f.a.$emit("retryPipeline",this.pipeline.retry_path)}}},J=Object(u.a)(H,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"commit gl-responsive-table-row"},[i("div",{staticClass:"table-section section-10 commit-link"},[i("div",{staticClass:"table-mobile-header",attrs:{role:"rowheader"}},[e._v(e._s(e.s__("Pipeline|Status")))]),e._v(" "),i("div",{staticClass:"table-mobile-content"},[i("ci-badge",{attrs:{status:e.pipelineStatus,"show-text":!e.isChildView,"data-qa-selector":"pipeline_commit_status"}})],1)]),e._v(" "),i("pipeline-url",{attrs:{pipeline:e.pipeline,"auto-devops-help-path":e.autoDevopsHelpPath}}),e._v(" "),i("pipeline-triggerer",{attrs:{pipeline:e.pipeline}}),e._v(" "),i("div",{staticClass:"table-section section-wrap section-20"},[i("div",{staticClass:"table-mobile-header",attrs:{role:"rowheader"}},[e._v(e._s(e.s__("Pipeline|Commit")))]),e._v(" "),i("div",{staticClass:"table-mobile-content"},[i("commit-component",{attrs:{tag:e.commitTag,"commit-ref":e.commitRef,"commit-url":e.commitUrl,"merge-request-ref":e.pipeline.merge_request,"short-sha":e.commitShortSha,title:e.commitTitle,author:e.commitAuthor,"show-ref-info":!e.isChildView}})],1)]),e._v(" "),i("div",{staticClass:"table-section section-wrap section-15 stage-cell"},[i("div",{staticClass:"table-mobile-header",attrs:{role:"rowheader"}},[e._v(e._s(e.s__("Pipeline|Stages")))]),e._v(" "),i("div",{staticClass:"table-mobile-content"},[e.pipeline.details.stages.length>0?e._l(e.pipeline.details.stages,(function(t,n){return i("div",{key:n,staticClass:"stage-container dropdown js-mini-pipeline-graph"},[i("pipeline-stage",{attrs:{type:e.$options.pipelinesTable,stage:t,"update-dropdown":e.updateGraphDropdown}})],1)})):e._e()],2)]),e._v(" "),i("pipelines-timeago",{attrs:{duration:e.pipelineDuration,"finished-time":e.pipelineFinishedAt}}),e._v(" "),e.displayPipelineActions?i("div",{staticClass:"table-section section-20 table-button-footer pipeline-actions"},[i("div",{staticClass:"btn-group table-action-buttons"},[e.actions.length>0?i("pipelines-actions-component",{attrs:{actions:e.actions}}):e._e(),e._v(" "),e.pipeline.details.artifacts.length?i("pipelines-artifacts-component",{staticClass:"d-md-block",attrs:{artifacts:e.pipeline.details.artifacts}}):e._e(),e._v(" "),e.pipeline.flags.retryable?i("loading-button",{attrs:{loading:e.isRetrying,disabled:e.isRetrying,"container-class":"js-pipelines-retry-button btn btn-default btn-retry","data-qa-selector":"pipeline_retry_button"},on:{click:e.handleRetryClick}},[i("icon",{attrs:{name:"repeat"}})],1):e._e(),e._v(" "),e.pipeline.flags.cancelable?i("loading-button",{attrs:{loading:e.isCancelling,disabled:e.isCancelling,"data-toggle":"modal","data-target":"#confirmation-modal","container-class":"js-pipelines-cancel-button btn btn-remove"},on:{click:e.handleCancelClick}},[i("icon",{attrs:{name:"close"}})],1):e._e()],1)]):e._e()],1)}),[],!1,null,null,null).exports,Q=i("Q33P"),W=i.n(Q),X=i("Mifk"),Y=i("8zNS"),Z={components:{GlModal:X.a,GlLink:y.a,CiIcon:Y.a},props:{pipeline:{type:Object,required:!0,deep:!0}},computed:{modalTitle:function(){return Object(o.e)(Object(o.d)("Pipeline|Stop pipeline #%{pipelineId}?"),{pipelineId:"".concat(this.pipeline.id)},!1)},modalText:function(){return Object(o.e)(Object(o.d)("Pipeline|Youâ€™re about to stop pipeline %{pipelineId}."),{pipelineId:"<strong>#".concat(this.pipeline.id,"</strong>")},!1)},hasRef:function(){return!W()(this.pipeline.ref)}},methods:{emitSubmit:function(e){this.$emit("submit",e)}}},K={components:{PipelinesTableRowComponent:J,PipelineStopModal:Object(u.a)(Z,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("gl-modal",{attrs:{id:"confirmation-modal","header-title-text":e.modalTitle,"footer-primary-button-text":e.s__("Pipeline|Stop pipeline"),"footer-primary-button-variant":"danger"},on:{submit:function(t){return e.emitSubmit(t)}}},[i("p",{domProps:{innerHTML:e._s(e.modalText)}}),e._v(" "),e.pipeline?i("p",[e.pipeline.details?i("ci-icon",{staticClass:"vertical-align-middle",attrs:{status:e.pipeline.details.status}}):e._e(),e._v(" "),i("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.__("Pipeline")))]),e._v(" "),i("a",{staticClass:"js-pipeline-path link-commit qa-pipeline-path",attrs:{href:e.pipeline.path}},[e._v("#"+e._s(e.pipeline.id))]),e._v(" "),e.hasRef?[e._v("\n      "+e._s(e.__("from"))+"\n      "),i("a",{staticClass:"link-commit ref-name",attrs:{href:e.pipeline.ref.path}},[e._v(e._s(e.pipeline.ref.name))])]:e._e()],2):e._e(),e._v(" "),e.pipeline.commit?[i("p",[i("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.__("Commit")))]),e._v(" "),i("gl-link",{staticClass:"js-commit-sha commit-sha link-commit",attrs:{href:e.pipeline.commit.commit_path}},[e._v("\n        "+e._s(e.pipeline.commit.short_id)+"\n      ")])],1),e._v(" "),i("p",[e._v(e._s(e.pipeline.commit.title))])]:e._e()],2)}),[],!1,null,null,null).exports},directives:{GlTooltip:h.a},props:{pipelines:{type:Array,required:!0},updateGraphDropdown:{type:Boolean,required:!1,default:!1},autoDevopsHelpPath:{type:String,required:!0},viewType:{type:String,required:!0}},data:function(){return{pipelineId:0,pipeline:{},endpoint:"",cancelingPipeline:null}},watch:{pipelines:function(){this.cancelingPipeline=null}},created:function(){f.a.$on("openConfirmationModal",this.setModalData)},beforeDestroy:function(){f.a.$off("openConfirmationModal",this.setModalData)},methods:{setModalData:function(e){this.pipelineId=e.pipeline.id,this.pipeline=e.pipeline,this.endpoint=e.endpoint},onSubmit:function(){f.a.$emit("postAction",this.endpoint),this.cancelingPipeline=this.pipelineId}}},ee=Object(u.a)(K,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ci-table"},[i("div",{staticClass:"gl-responsive-table-row table-row-header",attrs:{role:"row"}},[i("div",{staticClass:"table-section section-10 js-pipeline-status",attrs:{role:"rowheader"}},[e._v("\n      "+e._s(e.s__("Pipeline|Status"))+"\n    ")]),e._v(" "),i("div",{staticClass:"table-section section-10 js-pipeline-info pipeline-info",attrs:{role:"rowheader"}},[e._v("\n      "+e._s(e.s__("Pipeline|Pipeline"))+"\n    ")]),e._v(" "),i("div",{staticClass:"table-section section-10 js-triggerer-info triggerer-info",attrs:{role:"rowheader"}},[e._v("\n      "+e._s(e.s__("Pipeline|Triggerer"))+"\n    ")]),e._v(" "),i("div",{staticClass:"table-section section-20 js-pipeline-commit pipeline-commit",attrs:{role:"rowheader"}},[e._v("\n      "+e._s(e.s__("Pipeline|Commit"))+"\n    ")]),e._v(" "),i("div",{staticClass:"table-section section-15 js-pipeline-stages pipeline-stages",attrs:{role:"rowheader"}},[e._v("\n      "+e._s(e.s__("Pipeline|Stages"))+"\n    ")])]),e._v(" "),e._l(e.pipelines,(function(t){return i("pipelines-table-row-component",{key:t.id,attrs:{pipeline:t,"update-graph-dropdown":e.updateGraphDropdown,"auto-devops-help-path":e.autoDevopsHelpPath,"view-type":e.viewType,"canceling-pipeline":e.cancelingPipeline}})})),e._v(" "),i("pipeline-stop-modal",{attrs:{pipeline:e.pipeline},on:{submit:e.onSubmit}})],2)}),[],!1,null,null,null).exports;t.a={components:{PipelinesTableComponent:ee,SvgBlankState:d,EmptyState:p.a,GlLoadingIcon:s.a},data:function(){return{isLoading:!1,hasError:!1,isMakingRequest:!1,updateGraphDropdown:!1,hasMadeRequest:!1}},computed:{shouldRenderPagination:function(){return!this.isLoading}},beforeMount:function(){var e=this;this.poll=new l.a({resource:this.service,method:"getPipelines",data:this.requestData?this.requestData:void 0,successCallback:this.successCallback,errorCallback:this.errorCallback,notificationCallback:this.setIsMakingRequest}),a.a.hidden()?this.fetchPipelines():(this.isLoading=!0,this.poll.makeRequest()),a.a.change((function(){a.a.hidden()?e.poll.stop():e.poll.restart()})),f.a.$on("postAction",this.postAction),f.a.$on("retryPipeline",this.postAction),f.a.$on("clickedDropdown",this.updateTable),f.a.$on("updateTable",this.updateTable),f.a.$on("refreshPipelinesTable",this.fetchPipelines),f.a.$on("runMergeRequestPipeline",this.runMergeRequestPipeline)},beforeDestroy:function(){f.a.$off("postAction",this.postAction),f.a.$off("retryPipeline",this.postAction),f.a.$off("clickedDropdown",this.updateTable),f.a.$off("updateTable",this.updateTable),f.a.$off("refreshPipelinesTable",this.fetchPipelines),f.a.$off("runMergeRequestPipeline",this.runMergeRequestPipeline)},destroyed:function(){this.poll.stop()},methods:{updateContent:function(e){var t=this;return this.updateInternalState(e),this.service.getPipelines(this.requestData).then((function(e){t.isLoading=!1,t.successCallback(e),t.poll.enable({data:t.requestData,response:e})})).catch((function(){t.isLoading=!1,t.errorCallback(),t.poll.restart({data:t.requestData})}))},updateTable:function(){return this.isMakingRequest&&this.service.cancelationSource.cancel(N.b),this.poll.stop(),this.poll.restart()},fetchPipelines:function(){this.isMakingRequest||(this.isLoading=!0,this.getPipelines())},getPipelines:function(){var e=this;return this.service.getPipelines(this.requestData).then((function(t){return e.successCallback(t)})).catch((function(t){return e.errorCallback(t)}))},setCommonData:function(e){this.store.storePipelines(e),this.isLoading=!1,this.updateGraphDropdown=!0,this.hasMadeRequest=!0,this.hasError&&(this.hasError=!1)},errorCallback:function(e){this.hasMadeRequest=!0,this.isLoading=!1,e&&e.message&&e.message!==N.b&&(this.hasError=!0,this.updateGraphDropdown=!1)},setIsMakingRequest:function(e){this.isMakingRequest=e,e&&(this.updateGraphDropdown=!1)},postAction:function(e){var t=this;this.service.postAction(e).then((function(){return t.updateTable()})).catch((function(){return Object(r.a)(Object(o.a)("An error occurred while making the request."))}))},runMergeRequestPipeline:function(e){var t=this;this.store.toggleIsRunningPipeline(!0),this.service.runMRPipeline(e).then((function(){return t.updateTable()})).catch((function(){Object(r.a)(Object(o.a)("An error occurred while trying to run a new pipeline for this Merge Request."))})).finally((function(){return t.store.toggleIsRunningPipeline(!1)}))}}}},jslJ:function(e,t,i){var n=i("jl4x"),a=i("OhKz"),s=i("aSVa"),o=i("Gw9p").UNSUPPORTED_Y;n&&("g"!=/./g.flags||o)&&a.f(RegExp.prototype,"flags",{configurable:!0,get:s})},olcB:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));i("va8A"),i("kO4A"),i("+kFb"),i("S6uq"),i("zCcL"),i("zpLX"),i("BD5p"),i("Id6h");var n=i("2ibD"),a=i("qPgm"),s=i("71Sp");function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){l(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function p(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),-1===t.indexOf(".json")?this.endpoint="".concat(t,".json"):this.endpoint=t}var t,i,o;return t=e,(i=[{key:"getPipelines",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.scope,i=e.page,a=n.a.CancelToken,o=r({scope:t,page:i},Object(s.a)(e));return this.cancelationSource=a.source(),n.a.get(this.endpoint,{params:o,cancelToken:this.cancelationSource.token})}},{key:"postAction",value:function(e){return n.a.post("".concat(e,".json"))}},{key:"runMRPipeline",value:function(e){var t=e.projectId,i=e.mergeRequestId;return a.a.postMergeRequestPipeline(t,{mergeRequestId:i})}}])&&p(t.prototype,i),o&&p(t,o),e}()}}]);
//# sourceMappingURL=commons~pages.projects.commit.pipelines~pages.projects.merge_requests.creations.new~pages.projects.p~f84ad5bf.b9c7bcf3.chunk.js.map