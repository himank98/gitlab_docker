(this.webpackJsonp=this.webpackJsonp||[]).push([[16],{"4lAS":function(t,e,n){"use strict";var i=n("ofGl"),s=n("s1D3"),a=n("FkSe"),r=n("LCwo"),o=n("XBTk"),l=n("Pyw5"),c=n.n(l);const u={components:{BButton:i.a,GlIcon:s.a,GlLoadingIcon:a.a},mixins:[r.a],props:{category:{type:String,required:!1,default:o.u.tertiary,validator:function(t){return Object.keys(o.u).includes(t)}},variant:{type:String,required:!1,default:o.x.default,validator:function(t){return Object.keys(o.x).includes(t)}},size:{type:String,required:!1,default:o.v.medium,validator:function(t){return Object.keys(o.v).includes(t)}},selected:{type:Boolean,required:!1,default:!1},icon:{type:String,required:!1,default:""},label:{type:Boolean,required:!1,default:!1},loading:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1}},computed:{hasIcon:function(){return""!==this.icon},hasIconOnly:function(){return 0===Object.keys(this.$slots).length&&this.hasIcon},isButtonDisabled:function(){return this.disabled||this.loading},buttonClasses:function(){return{"btn-icon":this.hasIconOnly,"button-ellipsis-horizontal":this.hasIconOnly&&"ellipsis_h"===this.icon,"btn-secondary":this.category===o.u.secondary,"gl-button":this.variant!==o.x.link,"btn-label":this.label,selected:this.selected}},buttonSize:function(){return o.w[this.size]}}};const d=c()({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-button",t._g(t._b({class:t.buttonClasses,attrs:{rel:t.relType,target:t.target,variant:t.variant,size:t.buttonSize,disabled:t.isButtonDisabled}},"b-button",t.$attrs,!1),t.$listeners),[t.loading?n("gl-loading-icon",{staticClass:"gl-button-loading-indicator",attrs:{inline:""}}):t._e(),t._v(" "),t.hasIcon?n("gl-icon",{attrs:{name:t.icon}}):t._e(),t._v(" "),t._t("emoji"),t._v(" "),t.hasIconOnly?t._e():n("span",{staticClass:"gl-button-text"},[t._t("default")],2)],2)},staticRenderFns:[]},void 0,u,void 0,!1,void 0,!1,void 0,void 0,void 0);e.a=d},IeAI:function(t,e,n){"use strict";n("va8A"),n("z4I3"),n("dj/k"),n("+kFb"),n("OZM5"),n("x/6R"),n("4ql4"),n("8Qi2"),n("MRnW"),n("IdsT"),n("GzNv"),n("tbvx"),n("S26F"),n("Id6h"),n("orcL");var i=n("jqx9"),s=n.n(i),a=n("3a3M"),r=n.n(a),o=(n("EJYk"),n("/lV4")),l=n("0AwG"),c=n("XRO8"),u=n("FVJN"),d=(n("t3Gg"),n("gyUR"),n("A7K0")),p=n("GTGS"),g=n("LLbv"),h=(n("+xU6"),n("len0")),f={components:{Icon:h.a},directives:{GlTooltip:g.a},props:{buttonTitle:{type:String,required:!0},icon:{type:String,required:!0},tag:{type:String,required:!0},tagBlock:{type:String,required:!1,default:""},tagSelect:{type:String,required:!1,default:""},prepend:{type:Boolean,required:!1,default:!1},tagContent:{type:String,required:!1,default:""},cursorOffset:{type:Number,required:!1,default:0}}},b=n("tBpV"),m={components:{ToolbarButton:Object(b.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"toolbar-btn js-md",attrs:{"data-md-tag":t.tag,"data-md-cursor-offset":t.cursorOffset,"data-md-select":t.tagSelect,"data-md-block":t.tagBlock,"data-md-tag-content":t.tagContent,"data-md-prepend":t.prepend,title:t.buttonTitle,"aria-label":t.buttonTitle,type:"button",tabindex:"-1","data-container":"body"},on:{click:function(){return t.$emit("click")}}},[n("icon",{attrs:{name:t.icon}})],1)}),[],!1,null,null,null).exports,Icon:h.a,GlPopover:d.a,GlDeprecatedButton:p.a},directives:{GlTooltip:g.a},props:{previewMarkdown:{type:Boolean,required:!0},lineContent:{type:String,required:!1,default:""},canSuggest:{type:Boolean,required:!1,default:!0},showSuggestPopover:{type:Boolean,required:!1,default:!1}},computed:{mdTable:function(){return["| header | header |","| ------ | ------ |","| cell | cell |","| cell | cell |"].join("\n")},mdSuggestion:function(){return["```suggestion:-0+0","{text}","```"].join("\n")}},mounted:function(){r()(document).on("markdown-preview:show.vue",this.previewMarkdownTab),r()(document).on("markdown-preview:hide.vue",this.writeMarkdownTab)},beforeDestroy:function(){r()(document).off("markdown-preview:show.vue",this.previewMarkdownTab),r()(document).off("markdown-preview:hide.vue",this.writeMarkdownTab)},methods:{isValid:function(t){return!t||t.find(".js-vue-markdown-field").length&&r()(this.$el).closest("form")[0]===t[0]},previewMarkdownTab:function(t,e){t.target.blur&&t.target.blur(),this.isValid(e)&&this.$emit("preview-markdown")},writeMarkdownTab:function(t,e){t.target.blur&&t.target.blur(),this.isValid(e)&&this.$emit("write-markdown")},handleSuggestDismissed:function(){this.$emit("handleSuggestDismissed")}}},v=Object(b.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"md-header"},[n("ul",{staticClass:"nav-links clearfix"},[n("li",{staticClass:"md-header-tab",class:{active:!t.previewMarkdown}},[n("button",{staticClass:"js-write-link",attrs:{tabindex:"-1",type:"button"},on:{click:function(e){return t.writeMarkdownTab(e)}}},[t._v("\n        "+t._s(t.__("Write"))+"\n      ")])]),t._v(" "),n("li",{staticClass:"md-header-tab",class:{active:t.previewMarkdown}},[n("button",{staticClass:"js-preview-link js-md-preview-button",attrs:{tabindex:"-1",type:"button"},on:{click:function(e){return t.previewMarkdownTab(e)}}},[t._v("\n        "+t._s(t.__("Preview"))+"\n      ")])]),t._v(" "),n("li",{staticClass:"md-header-toolbar",class:{active:!t.previewMarkdown}},[n("div",{staticClass:"d-inline-block"},[n("toolbar-button",{attrs:{tag:"**","button-title":t.__("Add bold text"),icon:"bold"}}),t._v(" "),n("toolbar-button",{attrs:{tag:"*","button-title":t.__("Add italic text"),icon:"italic"}}),t._v(" "),n("toolbar-button",{attrs:{prepend:!0,tag:"> ","button-title":t.__("Insert a quote"),icon:"quote"}})],1),t._v(" "),n("div",{staticClass:"d-inline-block ml-md-2 ml-0"},[t.canSuggest?[n("toolbar-button",{ref:"suggestButton",staticClass:"js-suggestion-btn",attrs:{tag:t.mdSuggestion,prepend:!0,"button-title":t.__("Insert suggestion"),"cursor-offset":4,"tag-content":t.lineContent,icon:"doc-code"},on:{click:t.handleSuggestDismissed}}),t._v(" "),t.showSuggestPopover&&t.$refs.suggestButton?n("gl-popover",{attrs:{target:t.$refs.suggestButton,"css-classes":["diff-suggest-popover"],placement:"bottom",show:t.showSuggestPopover}},[n("strong",[t._v(t._s(t.__("New! Suggest changes directly")))]),t._v(" "),n("p",{staticClass:"mb-2"},[t._v("\n              "+t._s(t.__("Suggest code changes which can be immediately applied in one click. Try it out!"))+"\n            ")]),t._v(" "),n("gl-deprecated-button",{attrs:{variant:"primary",size:"sm"},on:{click:t.handleSuggestDismissed}},[t._v("\n              "+t._s(t.__("Got it"))+"\n            ")])],1):t._e()]:t._e(),t._v(" "),n("toolbar-button",{attrs:{tag:"`","tag-block":"```","button-title":t.__("Insert code"),icon:"code"}}),t._v(" "),n("toolbar-button",{attrs:{tag:"[{text}](url)","tag-select":"url","button-title":t.__("Add a link"),icon:"link"}})],2),t._v(" "),n("div",{staticClass:"d-inline-block ml-md-2 ml-0"},[n("toolbar-button",{attrs:{prepend:!0,tag:"- ","button-title":t.__("Add a bullet list"),icon:"list-bulleted"}}),t._v(" "),n("toolbar-button",{attrs:{prepend:!0,tag:"1. ","button-title":t.__("Add a numbered list"),icon:"list-numbered"}}),t._v(" "),n("toolbar-button",{attrs:{prepend:!0,tag:"- [ ] ","button-title":t.__("Add a task list"),icon:"list-task"}}),t._v(" "),n("toolbar-button",{attrs:{tag:t.mdTable,prepend:!0,"button-title":t.__("Add a table"),icon:"table"}})],1),t._v(" "),n("div",{staticClass:"d-inline-block ml-md-2 ml-0"},[n("button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"toolbar-btn toolbar-fullscreen-btn js-zen-enter",attrs:{"aria-label":t.__("Go full screen"),"data-container":"body",tabindex:"-1",title:t.__("Go full screen"),type:"button"}},[n("icon",{attrs:{name:"screen-full"}})],1)])])])])}),[],!1,null,null,null).exports,_=n("4lAS"),w=n("MV2A"),y=n("FkSe"),k=n("30su"),S=n("s1D3"),B={components:{GlButton:_.a,GlLink:w.a,GlLoadingIcon:y.a,GlSprintf:k.a,GlIcon:S.a},props:{markdownDocsPath:{type:String,required:!0},quickActionsDocsPath:{type:String,required:!1,default:""},canAttachFile:{type:Boolean,required:!1,default:!0}},computed:{hasQuickActionsDocsPath:function(){return""!==this.quickActionsDocsPath}}},C=Object(b.a)(B,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-toolbar clearfix"},[n("div",{staticClass:"toolbar-text"},[!t.hasQuickActionsDocsPath&&t.markdownDocsPath?[n("gl-link",{attrs:{href:t.markdownDocsPath,target:"_blank"}},[t._v(t._s(t.__("Markdown is supported")))])]:t._e(),t._v(" "),t.hasQuickActionsDocsPath&&t.markdownDocsPath?[n("gl-sprintf",{attrs:{message:t.__("%{markdownDocsLinkStart}Markdown%{markdownDocsLinkEnd} and %{quickActionsDocsLinkStart}quick actions%{quickActionsDocsLinkEnd} are supported")},scopedSlots:t._u([{key:"markdownDocsLink",fn:function(e){var i=e.content;return[n("gl-link",{attrs:{href:t.markdownDocsPath,target:"_blank"}},[t._v(t._s(i))])]}},{key:"quickActionsDocsLink",fn:function(e){var i=e.content;return[n("gl-link",{attrs:{href:t.quickActionsDocsPath,target:"_blank"}},[t._v(t._s(i))])]}}],null,!1,1323006377)})]:t._e()],2),t._v(" "),t.canAttachFile?n("span",{staticClass:"uploading-container"},[n("span",{staticClass:"uploading-progress-container hide"},[[n("gl-icon",{attrs:{name:"media",size:16}})],t._v(" "),n("span",{staticClass:"attaching-file-message"}),t._v(" "),n("span",{staticClass:"uploading-progress"},[t._v("0%")]),t._v(" "),n("gl-loading-icon",{staticClass:"align-text-bottom",attrs:{inline:""}})],2),t._v(" "),n("span",{staticClass:"uploading-error-container hide"},[n("span",{staticClass:"uploading-error-icon"},[[n("gl-icon",{attrs:{name:"media",size:16}})]],2),t._v(" "),n("span",{staticClass:"uploading-error-message"}),t._v(" "),n("gl-sprintf",{attrs:{message:t.__("%{retryButtonStart}Try again%{retryButtonEnd} or %{newFileButtonStart}attach a new file%{newFileButtonEnd}")},scopedSlots:t._u([{key:"retryButton",fn:function(e){var i=e.content;return[n("button",{staticClass:"retry-uploading-link",attrs:{type:"button"}},[t._v(t._s(i))])]}},{key:"newFileButton",fn:function(e){var i=e.content;return[n("button",{staticClass:"attach-new-file markdown-selector",attrs:{type:"button"}},[t._v(t._s(i))])]}}],null,!1,3148882846)})],1),t._v(" "),n("gl-button",{staticClass:"markdown-selector button-attach-file",attrs:{variant:"link"}},[[n("gl-icon",{attrs:{name:"media",size:16}})],t._v(" "),n("span",{staticClass:"text-attach-file"},[t._v(t._s(t.__("Attach a file")))])],2),t._v(" "),n("gl-button",{staticClass:"btn btn-default btn-sm hide button-cancel-uploading-files",attrs:{variant:"link"}},[t._v("\n      "+t._s(t.__("Cancel"))+"\n    ")])],1):t._e()])}),[],!1,null,null,null).exports,j=n("KAYR"),A=n("2ibD");function q(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,s=!1,a=void 0;try{for(var r,o=t[Symbol.iterator]();!(i=(r=o.next()).done)&&(n.push(r.value),!e||n.length!==e);i=!0);}catch(t){s=!0,a=t}finally{try{i||null==o.return||o.return()}finally{if(s)throw a}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return x(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var P={components:{markdownHeader:v,markdownToolbar:C,icon:h.a,Suggestions:j.a},props:{isSubmitting:{type:Boolean,required:!1,default:!1},markdownPreviewPath:{type:String,required:!1,default:""},markdownDocsPath:{type:String,required:!0},addSpacingClasses:{type:Boolean,required:!1,default:!0},quickActionsDocsPath:{type:String,required:!1,default:""},canAttachFile:{type:Boolean,required:!1,default:!0},enableAutocomplete:{type:Boolean,required:!1,default:!0},line:{type:Object,required:!1,default:null},note:{type:Object,required:!1,default:function(){return{}}},canSuggest:{type:Boolean,required:!1,default:!1},helpPagePath:{type:String,required:!1,default:""},showSuggestPopover:{type:Boolean,required:!1,default:!1},textareaValue:{type:String,required:!1,default:""}},data:function(){return{markdownPreview:"",referencedCommands:"",referencedUsers:"",hasSuggestion:!1,markdownPreviewLoading:!1,previewMarkdown:!1,suggestions:this.note.suggestions||[]}},computed:{shouldShowReferencedUsers:function(){return this.referencedUsers.length>=10},lineContent:function(){var t=q(this.suggestions,1)[0];if(t)return t.from_content;if(this.line){var e=this.line,n=e.rich_text,i=e.text;return i||s()(Object(l.n)(n).replace(/\n/g,""))}return""},lineNumber:function(){var t;if(this.line){var e=this.line,n=e.new_line,i=e.old_line;t=n||i}return t},lineType:function(){return this.line?this.line.type:""},addMultipleToDiscussionWarning:function(){return Object(o.e)(Object(o.a)("%{icon}You are about to add %{usersTag} people to the discussion. They will all receive a notification."),{icon:'<i class="fa fa-exclamation-triangle" aria-hidden="true"></i>',usersTag:'<strong><span class="js-referenced-users-count">'.concat(this.referencedUsers.length,"</span></strong>")},!1)}},watch:{isSubmitting:function(t){if(t&&this.$refs["markdown-preview"].querySelectorAll){var e=this.$refs["markdown-preview"].querySelectorAll("video, audio");e&&e.forEach((function(t){t.pause()}))}}},mounted:function(){return new u.a(r()(this.$refs["gl-form"]),{emojis:this.enableAutocomplete,members:this.enableAutocomplete,issues:this.enableAutocomplete,mergeRequests:this.enableAutocomplete,epics:this.enableAutocomplete,milestones:this.enableAutocomplete,labels:this.enableAutocomplete,snippets:this.enableAutocomplete})},beforeDestroy:function(){var t=r()(this.$refs["gl-form"]).data("glForm");t&&t.destroy()},methods:{showPreviewTab:function(){var t,e,n=this;if(!this.previewMarkdown){this.previewMarkdown=!0;var i=(null===(t=this.$slots.textarea[0])||void 0===t?void 0:null===(e=t.elm)||void 0===e?void 0:e.value)||this.textareaValue;i?(this.markdownPreviewLoading=!0,this.markdownPreview=Object(o.a)("Loadingâ€¦"),A.a.post(this.markdownPreviewPath,{text:i}).then((function(t){return n.renderMarkdown(t.data)})).catch((function(){return new c.a(Object(o.a)("Error loading markdown preview"))}))):this.renderMarkdown()}},showWriteTab:function(){this.markdownPreview="",this.previewMarkdown=!1},renderMarkdown:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.markdownPreviewLoading=!1,this.markdownPreview=e.body||Object(o.a)("Nothing to preview."),e.references&&(this.referencedCommands=e.references.commands,this.referencedUsers=e.references.users,this.hasSuggestion=e.references.suggestions&&e.references.suggestions.length,this.suggestions=e.references.suggestions),this.$nextTick().then((function(){return r()(t.$refs["markdown-preview"]).renderGFM()})).catch((function(){return new c.a(Object(o.a)("Error rendering markdown preview"))}))}}},O=Object(b.a)(P,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"gl-form",staticClass:"js-vue-markdown-field md-area position-relative",class:{"prepend-top-default append-bottom-default":t.addSpacingClasses}},[n("markdown-header",{attrs:{"preview-markdown":t.previewMarkdown,"line-content":t.lineContent,"can-suggest":t.canSuggest,"show-suggest-popover":t.showSuggestPopover},on:{"preview-markdown":t.showPreviewTab,"write-markdown":t.showWriteTab,handleSuggestDismissed:function(){return t.$emit("handleSuggestDismissed")}}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.previewMarkdown,expression:"!previewMarkdown"}],staticClass:"md-write-holder"},[n("div",{staticClass:"zen-backdrop"},[t._t("textarea"),t._v(" "),n("a",{staticClass:"zen-control zen-control-leave js-zen-leave gl-text-gray-700",attrs:{href:"#","aria-label":t.__("Leave zen mode")}},[n("icon",{attrs:{size:16,name:"screen-normal"}})],1),t._v(" "),n("markdown-toolbar",{attrs:{"markdown-docs-path":t.markdownDocsPath,"quick-actions-docs-path":t.quickActionsDocsPath,"can-attach-file":t.canAttachFile}})],2)]),t._v(" "),t.hasSuggestion?[n("div",{directives:[{name:"show",rawName:"v-show",value:t.previewMarkdown,expression:"previewMarkdown"}],ref:"markdown-preview",staticClass:"js-vue-md-preview md-preview-holder"},[t.hasSuggestion?n("suggestions",{attrs:{"note-html":t.markdownPreview,"from-line":t.lineNumber,"from-content":t.lineContent,"line-type":t.lineType,disabled:!0,suggestions:t.suggestions,"help-page-path":t.helpPagePath}}):t._e()],1)]:[n("div",{directives:[{name:"show",rawName:"v-show",value:t.previewMarkdown,expression:"previewMarkdown"}],ref:"markdown-preview",staticClass:"js-vue-md-preview md md-preview-holder",domProps:{innerHTML:t._s(t.markdownPreview)}})],t._v(" "),t.previewMarkdown&&!t.markdownPreviewLoading?[t.referencedCommands?n("div",{staticClass:"referenced-commands",domProps:{innerHTML:t._s(t.referencedCommands)}}):t._e(),t._v(" "),t.shouldShowReferencedUsers?n("div",{staticClass:"referenced-users"},[n("span",{domProps:{innerHTML:t._s(t.addMultipleToDiscussionWarning)}})]):t._e()]:t._e()],2)}),[],!1,null,null,null);e.a=O.exports},KAYR:function(t,e,n){"use strict";n("+kFb"),n("Id6h");var i=n("jB52"),s=n("/lV4"),a=(n("t3Gg"),n("+xU6"),n("GTGS")),r=n("FkSe"),o=n("LLbv"),l=n("len0"),c=n("sHIo"),u={components:{Icon:l.a,GlDeprecatedButton:a.a,GlLoadingIcon:r.a},directives:{"gl-tooltip":o.a},mixins:[Object(c.a)()],props:{batchSuggestionsCount:{type:Number,required:!1,default:0},canApply:{type:Boolean,required:!1,default:!1},isApplied:{type:Boolean,required:!0,default:!1},isBatched:{type:Boolean,required:!1,default:!1},isApplyingBatch:{type:Boolean,required:!1,default:!1},helpPagePath:{type:String,required:!0}},data:function(){return{isApplyingSingle:!1}},computed:{canBeBatched:function(){return Boolean(this.glFeatures.batchSuggestions)},isApplying:function(){return this.isApplyingSingle||this.isApplyingBatch},tooltipMessage:function(){return this.canApply?Object(s.a)("This also resolves the discussion"):Object(s.a)("Can't apply as this line has changed or the suggestion already matches its content.")},tooltipMessageBatch:function(){return this.canBeBatched?this.tooltipMessage:Object(s.a)("Suggestions that change line count can't be added to batches, yet.")},isDisableButton:function(){return this.isApplying||!this.canApply},applyingSuggestionsMessage:function(){return this.isApplyingSingle||this.batchSuggestionsCount<2?Object(s.a)("Applying suggestion..."):Object(s.a)("Applying suggestions...")}},methods:{applySuggestion:function(){this.canApply&&(this.isApplyingSingle=!0,this.$emit("apply",this.applySuggestionCallback))},applySuggestionCallback:function(){this.isApplyingSingle=!1},applySuggestionBatch:function(){this.canApply&&this.$emit("applyBatch")},addSuggestionToBatch:function(){this.$emit("addToBatch")},removeSuggestionFromBatch:function(){this.$emit("removeFromBatch")}}},d=n("tBpV"),p=Object(d.a)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"md-suggestion-header border-bottom-0 mt-2"},[n("div",{staticClass:"qa-suggestion-diff-header js-suggestion-diff-header font-weight-bold"},[t._v("\n    "+t._s(t.__("Suggested change"))+"\n    "),t.helpPagePath?n("a",{staticClass:"js-help-btn",attrs:{href:t.helpPagePath,"aria-label":t.__("Help")}},[n("icon",{attrs:{name:"question-o","css-classes":"link-highlight"}})],1):t._e()]),t._v(" "),t.isApplied?n("div",{staticClass:"badge badge-success"},[t._v(t._s(t.__("Applied")))]):t.isApplying?n("div",{staticClass:"d-flex align-items-center text-secondary"},[n("gl-loading-icon",{staticClass:"d-flex-center mr-2"}),t._v(" "),n("span",[t._v(t._s(t.applyingSuggestionsMessage))])],1):t.canApply&&t.canBeBatched&&t.isBatched?n("div",{staticClass:"d-flex align-items-center"},[n("gl-deprecated-button",{staticClass:"btn-inverted js-remove-from-batch-btn btn-grouped",attrs:{disabled:t.isApplying},on:{click:t.removeSuggestionFromBatch}},[t._v("\n      "+t._s(t.__("Remove from batch"))+"\n    ")]),t._v(" "),n("gl-deprecated-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.viewport",value:t.__("This also resolves all related threads"),expression:"__('This also resolves all related threads')",modifiers:{viewport:!0}}],staticClass:"btn-inverted js-apply-batch-btn btn-grouped",attrs:{disabled:t.isApplying,variant:"success"},on:{click:t.applySuggestionBatch}},[t._v("\n      "+t._s(t.__("Apply suggestions"))+"\n      "),n("span",{staticClass:"badge badge-pill badge-pill-success"},[t._v("\n        "+t._s(t.batchSuggestionsCount)+"\n      ")])])],1):n("div",{staticClass:"d-flex align-items-center"},[t.canBeBatched?n("span",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.viewport",value:t.tooltipMessageBatch,expression:"tooltipMessageBatch",modifiers:{viewport:!0}}],attrs:{tabindex:"0"}},[n("gl-deprecated-button",{staticClass:"btn-inverted js-add-to-batch-btn btn-grouped",attrs:{disabled:t.isDisableButton},on:{click:t.addSuggestionToBatch}},[t._v("\n        "+t._s(t.__("Add suggestion to batch"))+"\n      ")])],1):t._e(),t._v(" "),n("span",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.viewport",value:t.tooltipMessage,expression:"tooltipMessage",modifiers:{viewport:!0}}],attrs:{tabindex:"0"}},[n("gl-deprecated-button",{staticClass:"btn-inverted js-apply-btn btn-grouped",attrs:{disabled:t.isDisableButton,variant:"success"},on:{click:t.applySuggestion}},[t._v("\n        "+t._s(t.__("Apply suggestion"))+"\n      ")])],1)])])}),[],!1,null,null,null).exports,g={name:"SuggestionDiffRow",props:{line:{type:Object,required:!0}},computed:{displayAsCell:function(){return!(this.line.rich_text||this.line.text)},lineType:function(){return this.line.type}}},h=Object(d.a)(g,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",{staticClass:"line_holder",class:t.lineType},[n("td",{staticClass:"diff-line-num old_line border-top-0 border-bottom-0",class:t.lineType},[t._v("\n    "+t._s(t.line.old_line)+"\n  ")]),t._v(" "),n("td",{staticClass:"diff-line-num new_line border-top-0 border-bottom-0",class:t.lineType},[t._v("\n    "+t._s(t.line.new_line)+"\n  ")]),t._v(" "),n("td",{staticClass:"line_content",class:[{"d-table-cell":t.displayAsCell},t.lineType]},[t.line.rich_text?n("span",{domProps:{innerHTML:t._s(t.line.rich_text)}}):t.line.text?n("span",[t._v(t._s(t.line.text))]):t._e()])])}),[],!1,null,null,null).exports;n("va8A"),n("kO4A"),n("Z5ek"),n("zCcL"),n("zpLX"),n("BD5p"),n("IdsT"),n("S26F");function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v(t){return t?t.replace(/^( |\+|-)/,""):t}function _(t){return t.filter((function(t){return"match"!==t.type})).map((function(t){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return b(b({},t),{},{text:v(t.text),rich_text:v(t.rich_text)})}(t)}))}var w={components:{SuggestionDiffHeader:p,SuggestionDiffRow:h},props:{suggestion:{type:Object,required:!0},batchSuggestionsInfo:{type:Array,required:!1,default:function(){return[]}},disabled:{type:Boolean,required:!1,default:!1},helpPagePath:{type:String,required:!0}},computed:{batchSuggestionsCount:function(){return this.batchSuggestionsInfo.length},isBatched:function(){var t=this;return Boolean(this.batchSuggestionsInfo.find((function(e){return e.suggestionId===t.suggestion.id})))},lines:function(){return _(this.suggestion.diff_lines)}},methods:{applySuggestion:function(t){this.$emit("apply",{suggestionId:this.suggestion.id,callback:t})},applySuggestionBatch:function(){this.$emit("applyBatch")},addSuggestionToBatch:function(){this.$emit("addToBatch",this.suggestion.id)},removeSuggestionFromBatch:function(){this.$emit("removeFromBatch",this.suggestion.id)}}},y=Object(d.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"md-suggestion"},[n("suggestion-diff-header",{staticClass:"qa-suggestion-diff-header js-suggestion-diff-header",attrs:{"can-apply":t.suggestion.appliable&&t.suggestion.current_user.can_apply&&!t.disabled,"is-applied":t.suggestion.applied,"is-batched":t.isBatched,"is-applying-batch":t.suggestion.is_applying_batch,"batch-suggestions-count":t.batchSuggestionsCount,"help-page-path":t.helpPagePath},on:{apply:t.applySuggestion,applyBatch:t.applySuggestionBatch,addToBatch:t.addSuggestionToBatch,removeFromBatch:t.removeSuggestionFromBatch}}),t._v(" "),n("table",{staticClass:"mb-3 md-suggestion-diff js-syntax-highlight code"},[n("tbody",t._l(t.lines,(function(t,e){return n("suggestion-diff-row",{key:e+"-"+t.text,attrs:{line:t}})})),1)])],1)}),[],!1,null,null,null).exports,k=n("XRO8"),S={props:{lineType:{type:String,required:!1,default:""},suggestions:{type:Array,required:!1,default:function(){return[]}},batchSuggestionsInfo:{type:Array,required:!1,default:function(){return[]}},noteHtml:{type:String,required:!0},disabled:{type:Boolean,required:!1,default:!1},helpPagePath:{type:String,required:!0}},data:function(){return{isRendered:!1}},watch:{suggestions:function(){this.reset()},noteHtml:function(){this.reset()}},mounted:function(){this.renderSuggestions()},methods:{renderSuggestions:function(){var t=this;if(this.noteHtml){var e=this.$refs.container.querySelectorAll(".js-render-suggestion");"old"===this.lineType&&Object(k.a)(Object(s.a)("Unable to apply suggestions to a deleted line."),"alert",this.$el),e.forEach((function(e,n){var i=e.parentElement;t.generateDiff(n).$mount(i)})),this.isRendered=!0}},generateDiff:function(t){var e=this,n=this.suggestions,s=this.disabled,a=this.batchSuggestionsInfo,r=this.helpPagePath,o=n&&n[t]?n[t]:{},l=new(i.default.extend(y))({propsData:{disabled:s,suggestion:o,batchSuggestionsInfo:a,helpPagePath:r}});return l.$on("apply",(function(t){var n=t.suggestionId,i=t.callback;e.$emit("apply",{suggestionId:n,callback:i,flashContainer:e.$el})})),l.$on("applyBatch",(function(){e.$emit("applyBatch",{flashContainer:e.$el})})),l.$on("addToBatch",(function(t){e.$emit("addToBatch",t)})),l.$on("removeFromBatch",(function(t){e.$emit("removeFromBatch",t)})),l},reset:function(){var t=this;this.$refs.container.innerHTML=this.noteHtml,this.isRendered=!1,this.renderSuggestions(),this.$nextTick((function(){return t.renderSuggestions()}))}}},B=Object(d.a)(S,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"flash-container js-suggestions-flash"}),this._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:this.isRendered,expression:"isRendered"}],ref:"container",staticClass:"md",domProps:{innerHTML:this._s(this.noteHtml)}})])}),[],!1,null,null,null);e.a=B.exports},LwwS:function(t,e,n){var i=n("ZfjD"),s=n("ynC3"),a=n("QmHw"),r=n("wZF9"),o=n("YO8x").onFreeze,l=Object.freeze;i({target:"Object",stat:!0,forced:a((function(){l(1)})),sham:!s},{freeze:function(t){return l&&r(t)?l(o(t)):t}})},NjXk:function(t,e,n){var i=n("ERvI")({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});t.exports=i},jqx9:function(t,e,n){var i=n("rhmX"),s=n("NjXk"),a=/&(?:amp|lt|gt|quot|#39);/g,r=RegExp(a.source);t.exports=function(t){return(t=i(t))&&r.test(t)?t.replace(a,s):t}},sHIo:function(t,e,n){"use strict";e.a=function(){return{inject:{glFeatures:{from:"glFeatures",default:function(){return{}}}}}}}}]);
//# sourceMappingURL=commons~pages.projects.issues.designs~pages.projects.issues.show~pages.projects.merge_requests.show~~adaba7a4.fca8e3f5.chunk.js.map